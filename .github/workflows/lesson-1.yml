name: Lesson 3 - Gemini AI

on:
  issues:
    types: [opened]

jobs:
  gemini:
    runs-on: ubuntu-latest

    steps:
      - name: Gemini ga so'rov yuborish
        env:
          GEMINI_API_KEY: ${{ secrets.GEMINI_API_KEY }}
        run: |
          echo "ISSUE TITLE:"
          echo "${{ github.event.issue.title }}"
          echo ""
          echo "ISSUE BODY:"
          echo "${{ github.event.issue.body }}"
          echo ""
          echo "===== GEMINI RESPONSE ====="

          curl -s https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-pro:generateContent?key=$GEMINI_API_KEY \
            -H "Content-Type: application/json" \
            -d '{
              "contents": [
                {
                  "parts": [
                    {
                      "text": "You are a senior software engineer. Answer clearly and step by step.\n\nTask:\n'"${{ github.event.issue.body }}"'"
                    }
                  ]
                }
              ]
            }'

